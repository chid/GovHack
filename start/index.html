<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta name="description" content="">
		<meta name="author" content="">
		<title>Energy Analyser - SynergEY</title>
		<!-- Bootstrap Core CSS -->
		<link href="css/bootstrap.min.css" rel="stylesheet">
		<!-- Custom CSS -->
		<link href="css/grayscale.css" rel="stylesheet">
		<!-- Custom Fonts -->
		<link href="font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
		<!-- <link href="http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel="stylesheet" type="text/css"> -->
		<!-- <link href="http://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css"> -->
		<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
		<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
		<!--[if lt IE 9]>
		<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
		<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
		<![endif]-->
		
	</head>
	<body id="page-top" data-spy="scroll" data-target=".navbar-fixed-top">
		<!-- Navigation -->
		<nav class="navbar navbar-custom navbar-fixed-top" role="navigation">
			<div class="container">
				<div class="navbar-header">
					<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-main-collapse">
					<i class="fa fa-bars"></i>
					</button>
					<a class="navbar-brand page-scroll" href="#page-top">
					<i class="fa fa-play-circle"></i>  <span class="light">Energy   </span>Analyser
					</a>
				</div>
				<!-- Collect the nav links, forms, and other content for toggling -->
				<div class="collapse navbar-collapse navbar-right navbar-main-collapse">
					<ul class="nav navbar-nav">
						<!-- Hidden li included to remove active class from about link when scrolled up past about section -->
						<li class="hidden">
							<a href="#page-top"></a>
						</li>
						<li>
							<a class="page-scroll" href="#about">Start Here</a>
						</li>
						<li>
							<a class="page-scroll" href="#comparison">Benchmark</a>
						</li>
						<li>
							<a class="page-scroll" href="#applicances">Key Applicances</a>
						</li>
					</ul>
				</div>
				<!-- /.navbar-collapse -->
			</div>
			<!-- /.container -->
		</nav>
		<!-- Intro Header -->
		<header class="intro" style="color: rgb(255,230,0);">
			<div class="intro-body">
				<div class="container">
					<div class="row">
						<div class="col-md-8 col-md-offset-2">
							</br>
							</br>
							</br>
							</br>
							</br>
							</br>
							</br>
							</br>
							</br>
							</br>
							</br>
							</br>
							</br>
							</br>
							</br>
							</br>
							</br>
							</br>
							</br>
							</br>
							<a href="#about" class="btn btn-circle page-scroll">
							<i class="fa fa-angle-double-down animated"></i>
							</a>
							</br>
							</br>
							</br>
							</br>
							</br>
							</br>
							</br>
							<h1 class="brand-heading">Energy Analyser</h1>
							<p class="intro-text">A simple energy applicance selection tool (for Australia)</p>
						</div>
					</div>
				</div>
			</div>
		</header>
		<!-- About Section -->
		<section id="about" class="container content-section">
			<div class="row">
				<div class="col-lg-8 col-lg-offset-2">
					<h3>Hello, in order to compare your electricity <!-- and water  -->consumption with your peers, please tell us a bit about yourself.</h3>
					
					<form class="form-horizontal">
						<fieldset>
							<!-- Form Name -->
							<!-- <legend>Form Name</legend> -->
							<!-- Text input-->
							<div class="control-group">
								<label class="control-label" for="name">Name</label>
								<div class="controls">
									<input id="name" name="name" placeholder="" class="input-xlarge" type="text" value="Bob Smith">
									
								</div>
							</div>
							<!-- Text input-->
							<div class="control-group">
								<label class="control-label" for="dob">Date of Birth</label>
								<div class="controls">
									<input id="dob" name="dob" placeholder="D.O.B" class="input-xlarge" type="text">
									
								</div>
							</div>
							<!-- Text input-->
							<div class="control-group">
								<label class="control-label" for="email">Email</label>
								<div class="controls">
									<input id="email" name="email" placeholder="" class="input-xlarge" type="text">
									
								</div>
							</div>
							<!-- Text input-->
							<div class="control-group">
								<label class="control-label" for="postcode">Postcode</label>
								<div class="controls">
									<input id="postcode" name="postcode" placeholder="used to find your peers" class="input-xlarge" type="text">
									
								</div>
							</div>
							<!-- Button -->
							<div class="control-group">
								<label class="control-label" for="submitDetails"></label>
								<div class="controls">
									<button id="submitDetails" name="submitDetails" class="btn btn-primary">Submit</button>
								</div>
							</div>
						</fieldset>
					</form>
				</div>
				<div style="height=400px"><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div>
			</div>
		</section>
		<!-- Download Section -->
		<section id="download" class="content-section">
			<div class="download-section">
				<div class="container">
					<div class="col-lg-8 col-lg-offset-2">
						
						<!-- Enter information about your house -->
						<form class="form-horizontal">
							<fieldset>
								<!-- Form Name -->
								<legend style="color: #FFF;">Current Housing Details</legend>
								<!-- Text input-->
								<div class="control-group">
									<label class="control-label" for="cost">How much do you currently pay for electricity per quarter?</label>
									<div class="controls">
										<input id="cost" name="cost" placeholder="$ / year" class="input-xlarge" required="" type="text">
										
									</div>
								</div>
								<!-- Select Basic -->
								<div class="control-group">
									<label class="control-label" for="peopleCount">How many people live in your home?</label>
									<div class="controls">
										<select id="peopleCount" name="peopleCount" class="input-xlarge">
											<option>1</option>
											<option>2</option>
											<option>3</option>
											<option>4</option>
											<option>5</option>
											<option>6+</option>
										</select>
									</div>
								</div>
								<!-- Multiple Radios -->
								<div class="control-group">
									<label class="control-label" for="house">House Type</label>
									<div class="controls">
										<label class="radio" for="house-0">
											<input name="house" id="house-0" value="Apartment" checked="checked" type="radio">
											Apartment
										</label>
										<label class="radio" for="house-1">
											<input name="house" id="house-1" value="House" type="radio">
											House
										</label>
									</div>
								</div>
								<!-- Text input-->
								<div class="control-group">
									<label class="control-label" for="rooms">How may rooms does your house have?</label>
									<div class="controls">
										<input id="rooms" name="rooms" placeholder="" class="input-xlarge" type="text">
										
									</div>
								</div>
								<!-- Select Basic -->
								<div class="control-group">
									<label class="control-label" for="peopleHome">Are people at home during daytime?</label>
									<div class="controls">
										<select id="peopleHome" name="peopleHome" class="input-xlarge">
											<option>Yes</option>
											<option>No</option>
										</select>
									</div>
								</div>
								<div class="control-group">
									<label class="control-label" for="submitHousing"></label>
									<div class="controls">
										<button id="submitHousing" name="submitHousing" class="btn btn-primary">Submit</button>
									</div>
								</div>
							</fieldset>
						</form>
					</div>
				</div>
				<div><br><br><br></div>
			</div>
		</section>
		<!-- new section -->
		<section id="comparison" class="container content-section text-center">
			<div class="row">
				<h3>How do you compare with your peers?</h3>
				
				<div class="container">
					<!-- Example row of columns -->
					<div class="row">
						<div class="tv col-md-6"> <!-- style="border-radius: 25px;border: 2px solid #8AC007;padding: 10px;" -->
						<div><!--  <img src="img/gh.jpeg">  --></div>
						<div><div id="container" style="min-width: 310px; height: 400px; margin: 0 auto"></div></div>
					</div>
					<div class="aircon col-md-6" style="border-radius: 25px;border: 2px solid #8AC007;padding: 10px;"> <!-- style="border-radius: 25px;border: 2px solid #8AC007;padding: 10px;" -->
					
					<h3 style="padding:0 !important!;margin-bottom:20px;max-height: 100px;">You are currently over the average energy consumption</h3>
					<p>Each month you are losing <span style="color:#FF4136;font-size:larger;" id="dollarSaved">$120</span> compared to similar people in your area</p>
				</div>
				

				<p><a class="btn btn-default view-details page-scroll"  style="margin-top:100px;" href="#applicances" role="button" >Find out how to save more!</a></p>
			</div>
		</div>
	</div>
</section>
<!-- applicances Section -->
<section id="applicances" class="container content-section text-center">
	<div class="row">
		<h3>Help us understand your applicances</h3>
		<p>Did you know that simply by changing your home appliances you can save as much as your peers!</p>
		<div class="container">
			<!-- Example row of columns -->
			<div class="row">
				<div class="tv col-md-3"> <!-- style="border-radius: 25px;border: 2px solid #8AC007;padding: 10px;" -->
				<div class="imagewrapper" style="max-height: 150px"><img src="img/TV.png" style="max-height: 150px;"></div>
				<h2 style="padding:0 !important!;margin-bottom:20px;max-height: 100px;">TV</h2>
		<p></p>
				<p><a class="btn btn-default view-details disabled" data-toggle="modal" data-target="#myModal" href="#" role="button">Coming Soon &raquo;</a></p>
			</div>
			<div class="aircon col-md-3"> <!-- style="border-radius: 25px;border: 2px solid #8AC007;padding: 10px;" -->
			<div class="imagewrapper" style="max-height: 150px"><img src="img/Aircon.png" style="max-height: 150px;"></div>
			<h2 style="padding:0 !important!;margin-bottom:20px;max-height: 100px;">AirCon</h2>
			<p style="padding:0;margin-bottom:0px;">Select Your Brand</p>
		<select class="tv brand form-control"></select>
		<p style="margin-bottom:0px">Select Your Model</p>
	<select class="tv model form-control"><option>Select a Brand Above</option></select>
	<div id="starRating"></div>
	<!-- <p>Select the size of your House</p>
	<div class="slider-range"></div> -->
	<p style="padding 0;margin-bottom:0px">Do you recommend this product?</p>
			<div class="btn-group" role="group">
					<button type="button" class="btn btn-default">Yes</button>
					<button type="button" class="btn btn-default">No  </button>
				</div>

	<p><a style="margin-top: 20px;" class="btn btn-default view-details" data-toggle="modal" data-target="#myModal" href="#" role="button">Recommendations &raquo;</a></p>
</div>
<div class="fridge col-md-3"> <!-- style="border-radius: 25px;border: 2px solid #8AC007;padding: 10px;" -->
<div class="imagewrapper" style="max-height: 150px"><img src="img/Fridge.png" style="max-height: 150px;"></div>
<h2 style="padding:0 !important!;margin-bottom:20px;max-height: 100px;">Fridge</h2>
<p></p>
<a class="btn btn-default view-details disabled" data-toggle="modal" data-target="#myModal" href="#" role="button">Coming Soon &raquo;</a></p>
</div>
<div class="washer col-md-3"> <!-- style="border-radius: 25px;border: 2px solid #8AC007;padding: 10px;" -->
<div class="imagewrapper" style="max-height: 150px"><img src="img/Washer.png" style="max-height: 150px;"></div>
<h2 style="padding:0 !important!;margin-bottom:20px;max-height: 100px;">washer</h2>
<p></p>
<a class="btn btn-default view-details disabled" data-toggle="modal" data-target="#myModal" href="#" role="button">Coming Soon &raquo;</a></p>
</div>
</div>
</div>
</div>
</section>
<!-- Modal -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
<div class="modal-dialog" role="document" > <!-- style="width:100%" -->
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
<h4 class="modal-title" id="myModalLabel">Action Item.</h4>
</div>
<div class="modal-body">

</div>
<table class="table" id="recommend"></table>
<div class="modal-footer">
<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
<!-- <button type="button" class="btn btn-primary">Save changes</button> -->
</div>
</div>
</div>
</div>
<!-- Footer -->
<footer>
<div class="container text-center">
<p>Copyright &copy; SynergEY (2015)</p>
</div>
</footer>
<!-- jQuery -->
<script src="js/jquery.js"></script>
<script src="http://code.highcharts.com/highcharts.js"></script>
<script src="http://code.highcharts.com/modules/exporting.js"></script>
<!-- Bootstrap Core JavaScript -->
<script src="js/bootstrap.min.js"></script>
<!-- Plugin JavaScript -->
<script src="js/jquery.easing.min.js"></script>
<!-- Google Maps API Key - Use your own API key to enable the map feature. More information on the Google Maps API can be found at https://developers.google.com/maps/ -->
<!-- Custom Theme JavaScript -->
<script src="js/grayscale.js"></script>	
<script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
<script type="text/javascript">

		$(document).ready(function() {
			console.log('ok');
			// $('.btn-circle').click();
		});
$('.view-details').click(function(e){
e.preventDefault();
// get the current type.
console.log(this);
obj = this;
type = obj.parentElement.parentElement.classList[0];
console.log(type);
console.log('here!!');
switch (type) {
	case 'tv':
		$('.modal-body').text(doingWellString);
		break;
	case 'aircon':
		$('.modal-body').text(postCodeString);
		findRecommends('', $('.tv.model.form-control').val());
		break;
	case 'fridge':
		$('.modal-body').text(postCodeString);
		break;
	case 'washer': 
	}
// alert('hey get away, not done yet');
})
// $( ".slider-range" ).slider({
//   range: true,
//   min: 0,
//   max: 500,
//   values: [ 75, 300 ],
//   slide: function( event, ui ) {
//     $( "div" ).val( "$" + ui.values[ 0 ] + " - $" + ui.values[ 1 ] );
//   }
// });
// $( "#amount" ).val( "$" + $( "#slider-range" ).slider( "values", 0 ) +
//   " - $" + $( "#slider-range" ).slider( "values", 1 ) );
		var obj;
$(document).ready(function() {
			$.getJSON( "/gov/type.php", function( data ) {
			var items = [];
			$.each( data, function( key, val ) {
				$('.brand.form-control').append($('<option>', {
					value: val.Brand,
					text : val.Brand
						}));
					});
				});
			$('.brand.form-control').change(function(){
				console.log(this.value);
				obj = this;
				populateModel(this.value);
			});
			$('.model.form-control').change(function(){
				console.log(this.value);
				getInfo(this.value);
			});
			$('.model.form-control').keyup(function(){
				console.log(this.value);
				getInfo(this.value);
			});
});
function populateModel(brand) {
	$.getJSON( "/gov/brand.php?p="+escape(brand), function( data ) {
	$('.model').find('option').remove(	)
			var items = [];
			$.each( data, function( key, val ) {
				$('.model.form-control').append($('<option>', {
					value: val.Model_No,
					text : val.Model_No
					}));
				});
			});
}
var currentModel;
function getInfo(model) {
	$.getJSON( "/gov/model.php?p="+escape(model), function( data ) {
			currentModel = data;
			// currentModel[0].Star2010_Heat
			// currentModel[0].Star2010_Cool
			hstar = currentModel[0].Star2010_Heat;
			cstar = currentModel[0].Star2010_Cool;
			if (hstar == null) {
				hstar = currentModel[0].star2000_heat + " (old)";
				cstar = currentModel[0].star2000_cool + " (old)";
			}
			$('#starRating').text("Heating: "+ hstar+ ", Cooling: "+ cstar);
			});
}
function recommend(model) {
	$.getJSON( "/gov/recomend.php?p="+escape(model), function( data ) {
				alert("success!");
			});
}
$('form').submit(function(e){
	// submitted
	e.preventDefault();
	console.log("submitted");
	if ($('#cost').val() != "") {
		// do the work...
		// #TODO
		// $.getJSON( "/gov/q.php?p="+escape($('#cost').val()), function( data ) {
		// 			alert("success!");
		// 		});
	}
	// scroll to next section
	// check if amount per year is specified.... query DB and return results.
	
	if ($(document).scrollTop() < $('#download').offset().top) {
	$('html, body').stop().animate({
	scrollTop: $('#download').offset().top
	}, 1500, 'easeInOutExpo');
	} else {
	$('html, body').stop().animate({
	scrollTop: $('#comparison').offset().top
	}, 1500, 'easeInOutExpo');
	var a = Array.apply(null, new Array(12)).map(function(){return $('#cost').val() / 3});
	Highcharts.charts[0].series[1].setData(a,true);
	$('#dollarSaved').text((2692.62 - $('#cost').val())/12);
}
});
var postCodeString = '';

// var doing well string
var doingWellString = 'Awesome! It looks like you already own a very energy efficient applicance for your use case!';
function getPostcode(postCode) {
		var url = '/gov/air.php?p=' + postCode;
		console.log(url);
		$.getJSON(url, function( data ) {
		// 	var items = [];
		// $.each( data, function( key, val ) {
		// items.push( "<li id='" + key + "'>" + key + '-' + val + "</li>" );
		// });
					outputString = "The typical number of hours that people in your area use their air conditioning on heating is "+data['Annual heating hours']+" and " + data['Annual cooling hours']+ ' hours on cooling';

					if (parseInt(data['Annual cooling hours']) > parseInt(data['Annual heating hours'])) {
						outputString += ".\n You should look for an air conditioning unit which is more efficient at cooling";
					} else {
						outputString += ".\n You should look for an air conditioning unit which is more efficient at heating.";
					}
					outputString += " Source: data.gov.au (Air-conditioner Location Running Hours Data)";
					// plz bounty me
					// outputString += "\n\nThe weighted energy use for your area for your airconditioning unit is 19298 kw/year which equals $... per year";
					// $('#output').text(outputString);
					postCodeString = outputString;
					}
					)
			}
		$("#postcode").keyup(function (e) {
			console.log(e.keyCode);
		// if (e.keyCode == 13 or true) {
			getPostcode($("#postcode").val());
		// }
		});
		getPostcode(2036);

function isNumber(n) {
  return !isNaN(parseFloat(n)) && isFinite(n);
}

function findRecommends(type, model) {
	var url = '/gov/findme.php?p=' + escape(model) + '&t=' + type;
		console.log(url);
		$.getJSON(url, function( data ) {
			obj = data;
			for (var i = 0; i < data.length; i++) {
				r = data[i];
				// console.log(r['Brand'] + ": " + r['Model_No'] + " - " + r['Star2010_Heat'] + " stars for heating," + r['Star2010_Cool'] + ' (for cooling)');
				// console.log("<img src=\"" + r['Star Image Small'] + "\">");

					
						}

			 var tbl_body = "";
		    var odd_even = false;
		    var th = ""
		    d = Object.keys(data[0]);
				$.each(d, function(k , v) {
		        	if (isNumber(v) == false) {
		            	th += "<td>"+v+"</td>";
		        	}
		        })

		        th = "<td>Brand</td><td>Model No</td><td>Cooling Rating</td><td>Heat Rating</td><td>Social Recommends</td>"
		    $.each(data, function() {
		        var tbl_row = "";
		        $.each(this, function(k , v) {
		        	if (isNumber(k) == false) {
		            	tbl_row += "<td>"+v+"</td>";
		        	}
		        })
		        tbl_body += "<tr class=\""+( odd_even ? "odd" : "even")+"\">"+tbl_row+"</tr>";
		        odd_even = !odd_even;               
		    })
		    $("#recommend").html("<thead><tr>"+th+"</tr></thead>"+tbl_body);

	});
}
// findRecommends();
</script>


<script type="text/javascript">
chart = 1;

$(function () {
    $('#container').highcharts({
    	// chart = this;
        title: {
            text: 'Monthly Average Spend',
            x: -20 //center
        },
        subtitle: {
            text: 'Source: data.gov.au (Sample household electricity time of use data)',
            x: -20
        },
        xAxis: {
            categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun',
                'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
        },
        yAxis: {
            title: {
                text: 'Spend'
            },
            plotLines: [{
                value: 0,
                width: 1,
                color: '#808080'
            }]
        },
        tooltip: {
            // valueSuffix: '°C'
            valuePrefix: '$'
        },
        legend: {
            layout: 'vertical',
            align: 'right',
            verticalAlign: 'middle',
            borderWidth: 0
        },
        series: [{
            name: 'User Like You',
            data: [180.48,
				153.37,
				103.67,
				156.45,
				251.05,
				287.63,
				283.12,
				287.03,
				252.54,
				244.03,
				246.11,
				247.14] 
        }, {
            name: 'You',
            data: [280,
280,
280,
280,
280,
280,
280,
280,
280,
280,
280,
280]
        }]
    });
});
</script>

</body>
</html



